{"version":3,"sources":["components/products/Products.module.css","components/products/ListItem.js","components/products/List.js","components/Carousel.js","pages/Home.js"],"names":["module","exports","url","connect","state","CartReducer","addItemToCart","removeItemFromCart","deleteProduct","fetchData","editProduct","props","useState","item","title","setTitle","price","setPrice","desc","setDesc","image","setImage","phone","setPhone","name","setName","useHistory","isOpen","setIsOpen","editData","id","e","preventDefault","data","console","log","Axios","patch","then","res","Card","CardBody","className","styles","imageContainer","src","description","ButtonGroup","Button","onClick","color","Modal","onSubmit","event","type","placeholder","value","onChange","target","btn","cartItems","find","a","isInCart","stopPropagation","handleRemove","handleCartClick","width","height","alt","CartSvg","delete","get","delProduct","delData","List","Row","map","Col","md","card","key","_id","items","HomeCarousel","activeIndex","setActiveIndex","animating","setAnimating","next","nextIndex","length","previous","slides","index","CarouselItem","onExiting","onExited","im","altText","CarouselCaption","captionText","caption","captionHeader","Container","Carousel","CarouselIndicators","onClickHandler","newIndex","CarouselControl","direction","directionText","ProductReducer","loading","err","dispatch","useEffect","message"],"mappings":"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","file":"static/js/5.b4f5b41e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageContainer\":\"Products_imageContainer__34h4d\",\"image\":\"Products_image__1Q63I\",\"card\":\"Products_card__1bi_A\",\"btn\":\"Products_btn__2V8d5\"};","import React, { useState } from 'react';\r\nimport { Card, CardBody, ButtonGroup, Button, Modal } from 'reactstrap';\r\nimport styles from './Products.module.css';\r\nimport CartSvg from '../../assets/icons/cart.svg'\r\nimport {\r\n    addItemToCart,\r\n    removeItemFromCart,\r\n    fetchData,\r\n    deleteProduct,\r\n    editProduct\r\n} from '../../redux/actions';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Axios from 'axios';\r\n\r\nconst url = \"http://localhost:8000\"\r\n\r\nfunction ListItem(props) {\r\n    const [title, setTitle] = useState(props.item.title);\r\n    const [price, setPrice] = useState(props.item.price);\r\n    const [desc, setDesc] = useState(props.item.desc);\r\n    const [image, setImage] = useState(props.item.image);\r\n    const [phone, setPhone] = useState(props.item.phone);\r\n    const [name, setName] = useState(props.item.name);\r\n\r\n    const { item } = props\r\n\r\n    const history = useHistory()\r\n\r\n    const isInCart = (item, cartItems) => {\r\n        return !!cartItems.find((a) => a.id === item.id);\r\n    }\r\n\r\n    const handleCartClick = (e, item) => {\r\n        \r\n        e.stopPropagation()\r\n        props.addItemToCart(item)\r\n        // if (localStorage.getItem('token')) {\r\n        //     history.replace('/order')\r\n        // }\r\n    }\r\n\r\n    const handleRemove = (e, id) => {\r\n        e.stopPropagation()\r\n        props.removeItemFromCart(id)\r\n    }\r\n    const [isOpen, setIsOpen] = useState(false)\r\n\r\n    function delData(id, e) {\r\n        e.stopPropagation()\r\n        async function delProduct(id) {\r\n            await Axios.delete(`${url}/posts/${id}`)\r\n            props.deleteProduct(id)\r\n            Axios.get(`${url}/posts`)\r\n                .then(({ data }) => {\r\n                    console.log(data)\r\n                    props.fetchData(data)\r\n                })\r\n        }\r\n        delProduct(id)\r\n    }\r\n    function editData(id, e) {\r\n        e.preventDefault()\r\n        const data = {\r\n            title,\r\n            price,\r\n            desc,\r\n            image,\r\n            name,\r\n            phone\r\n        }\r\n        console.log(\"PRE PATCH DATA\", data)\r\n        setIsOpen(\"\")\r\n        Axios.patch(`${url}/posts/${id}`, data)\r\n            .then((res) => {\r\n                props.editProduct(res.data)\r\n            })\r\n    } \r\n    return (\r\n        <div>\r\n            <Card \r\n            // onClick={() => history.replace(\"/products/\" + item.id)}\r\n            >\r\n                <CardBody className='shadow'>\r\n                    <div className={styles.imageContainer}>\r\n                        <img className={styles.image} src={item.image} />\r\n                    </div>\r\n                    <h5>{item.title}</h5>\r\n                    <p>{item.description}</p>\r\n                    <h5>{item.price} $</h5>\r\n                    <ButtonGroup className='w-100'>\r\n                        <Button\r\n                            // onClick={handleCartClick}\r\n                            onClick={() => setIsOpen(true)}\r\n                            color='warning'>\r\n                            edit\r\n                        </Button>\r\n                        <Modal isOpen={isOpen}>\r\n                            <Card>\r\n                                <CardBody>\r\n                                    <form onSubmit={(event)=> editData(item.id, event)}>\r\n                                    <div className=\"form-group\">\r\n                                        <h5 className=\"mb-4\"\r\n                                        >Редактирование свойств товара</h5>\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"Название товара\"\r\n                                            value={title}\r\n                                            onChange={(e) => setTitle(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"number\"\r\n                                            placeholder=\"Цена\"\r\n                                            value={price}\r\n                                            onChange={(e) => setPrice(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"Подробное описание\"\r\n                                            value={desc}\r\n                                            onChange={(e) => setDesc(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"URL фото\"\r\n                                            value={image}\r\n                                            onChange={(e) => setImage(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"text\"\r\n                                            placeholder=\"Имя и фамилия\"\r\n                                            value={name}\r\n                                            onChange={(e) => setName(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            className=\"form-control mb-3\"\r\n                                            type=\"number\"\r\n                                            placeholder=\"Контактный номер телефона\"\r\n                                            value={phone}\r\n                                            onChange={(e) => setPhone(e.target.value)}\r\n                                        />\r\n                                        <ButtonGroup className={styles.btn}>\r\n                                        <button className=\"btn btn-primary w-100\" type=\"submit\"\r\n                                            onClick={(e) => editData( item.id, e)}>\r\n                                            Сохранить\r\n                                        </button>\r\n                                        <button className=\"btn btn-secondary w-100\"\r\n                                        onClick={()=>setIsOpen(false)}\r\n                                        >\r\n                                            Отмена\r\n                                        </button>\r\n                                    </ButtonGroup>\r\n                                    </div>\r\n                                </form>\r\n                                </CardBody>\r\n                            </Card>\r\n                            \r\n                        </Modal>\r\n                        {console.log(item)}\r\n                        {isInCart(item, props.cartItems) ? (\r\n                            <Button\r\n                                color=\"warning\"\r\n                                onClick={(e) => handleRemove(e, item.id)}\r\n                            >\r\n                                Remove from cart\r\n                            </Button>\r\n                        ) : (\r\n                                <Button\r\n                                    onClick={(e) => handleCartClick(e, item)}\r\n                                    color='success'>\r\n                                    <img\r\n                                        className=\"ml-1\"\r\n                                        width=\"20\"\r\n                                        height=\"20\"\r\n                                        alt=\"cart\"\r\n                                        src={CartSvg} />\r\n                                </Button>\r\n                            )}\r\n                            <Button\r\n                            // onClick={handleCartClick}\r\n                            onClick={(e) => delData(item.id, e)}\r\n                            color='danger'>\r\n                            &times;\r\n                            </Button>\r\n                    </ButtonGroup>\r\n                </CardBody>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => state.CartReducer;\r\n\r\n// const mapStateToProps = (state) => {\r\n    \r\n//     let { products } = state.ProductReducer\r\n//     return { products }\r\n// }\r\nexport default connect(mapStateToProps, { \r\n    addItemToCart, \r\n    removeItemFromCart, \r\n    deleteProduct, \r\n    fetchData, \r\n    editProduct \r\n})(ListItem)\r\n","import React from 'react'\r\nimport { Row, Col } from 'reactstrap'\r\nimport ListItem from './ListItem'\r\nimport styles from './Products.module.css';\r\n\r\nfunction List(props) {\r\n    // console.log(props)\r\n    return (\r\n        <Row>\r\n            {props.data.map((item)=>(\r\n                <Col md={4} className={styles.card} key={item._id}>\r\n                    <ListItem item={item}/>\r\n                </Col>\r\n            ))}\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default List\r\n","import React, { useState } from 'react';\nimport {\n    Carousel,\n    CarouselItem,\n    CarouselControl,\n    CarouselIndicators,\n    CarouselCaption,\n    Container\n} from 'reactstrap';\nimport '../pages/Home.css'\n\nconst items = [\n    {\n        src: 'https://proprikol.ru/wp-content/uploads/2020/04/kartinki-bytovoj-tehniki-2.jpg',\n        // altText: 'Акция',\n        // caption: 'Бытовая техника'\n    },\n    {\n        src: 'https://img4.goodfon.ru/wallpaper/big/5/38/apple-mak-kompiuter-kompiuternyi-stol-displen-klaviatura-mak.jpg',\n        // altText: 'Распродажа',\n        // caption: 'Ноутбуки и компьютеры'\n    },\n    {\n        src: 'https://htstatic.imgsmail.ru/pic_image/80ddab9bb6e2662b98073603a212252c/840/472/1893792/',\n        // altText: 'Новинка',\n        // caption: 'Смартфоны и гаджеты'\n    },\n    \n];\n\nconst HomeCarousel = () => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [animating, setAnimating] = useState(false);\n\n    const next = () => {\n    if (animating) return;\n    const nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n    setActiveIndex(nextIndex);\n    }\n\n    const previous = () => {\n    if (animating) return;\n    const nextIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n    setActiveIndex(nextIndex);\n    }\n\n    const goToIndex = (newIndex) => {\n    if (animating) return;\n    setActiveIndex(newIndex);\n    }\n\nconst slides = items.map((item, index) => {\n    return (\n        <CarouselItem\n        onExiting={() => setAnimating(true)}\n        onExited={() => setAnimating(false)}\n        key={index+ \"--carousel-item\"}\n        >\n        <img className=\"img-car\" im src={item.src} alt={item.altText} />\n        <CarouselCaption captionText={item.caption} captionHeader={item.caption} />\n        </CarouselItem>\n    );\n});\n\n    return (\n        <div className='HomeMainDiv'>\n            <Container className='main-container'>\n                <Carousel className=\"custom-tag\"\n                    activeIndex={activeIndex}\n                    next = { next }\n                    previous={ previous }\n                >\n                <CarouselIndicators items={items} activeIndex={activeIndex} onClickHandler={goToIndex} />\n                {slides}\n                <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={previous} />\n                <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={next} />\n                </Carousel>\n            </Container>\n        </div>\n    );\n}\n\nexport default HomeCarousel;","import React, { useEffect } from 'react'\r\nimport List from '../components/products/List'\r\nimport { Container } from 'reactstrap'\r\nimport { fetchData } from '../redux/actions'\r\nimport { connect } from 'react-redux'\r\nimport HomeCarousel from '../components/Carousel'\r\nimport '../pages/Home.css';\r\n \r\n\r\n\r\nfunction Home(props) {\r\n    \r\n    const {fetchData} = props;\r\n    useEffect(()=>{\r\n        fetchData();\r\n    }, [fetchData]);\r\n    \r\n    if(props.err){\r\n        return <h4 className='text-danger'>\r\n            {props.err.message}\r\n        </h4>\r\n    }\r\n    return (\r\n        <Container >\r\n\r\n            <HomeCarousel />\r\n            <List data={props.data}/>\r\n            \r\n        </Container>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    const {data, loading, err} = state.ProductReducer;\r\n    return {data, loading, err};\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch)=>{\r\n    return{\r\n        fetchData: ()=>dispatch(fetchData())\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\r\n"],"sourceRoot":""}